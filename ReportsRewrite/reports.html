<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ClearEntry Reports</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="../DashboardRewrite/dashboard.css" />
        <link rel="stylesheet" href="reports.css" />
        <link rel="stylesheet" href="../Shared/notifications.css" />
        <script src="https://unpkg.com/lucide@latest"></script>
        <script src="../Shared/auth-config.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
    </head>
    <body>
        <div class="app">
            <aside class="sidebar">
                <div class="sidebar-brand">
                    <a class="brand-title" href="../Home/index.html" style="color: inherit; text-decoration: none;">ClearEntry</a>
                </div>
                <nav class="sidebar-nav">
                    <div class="nav-section">
                        <p class="nav-label">Overview</p>
                        <a class="nav-item" href="../DashboardRewrite/dashboard.html"
                            >Dashboard</a
                        >
                        <a class="nav-item" href="../EntriesRewrite/Entries.html"
                            >Journal</a
                        >
                    </div>
                    <div class="nav-section">
                        <p class="nav-label">Daily</p>
                        <a class="nav-item" href="../JournalRewrite/journal.html"
                            >Notebook</a
                        >
                        <a
                            class="nav-item"
                            href="../PreTradeRewrite/pretrade.html"
                            >Pre Execution</a
                        >
                        <a
                            class="nav-item"
                            href="../PsychologyRewrite/psychology.html"
                            >Psychology</a
                        >
                        <a
                            class="nav-item"
                            href="../TradeLoggingRewrite/tradelogging.html"
                            >Trade Logging</a
                        >
                    </div>
                    <div class="nav-section">
                        <p class="nav-label">Analytics</p>
                        <a class="nav-item" href="../AnalyticsRewrite/analytics.html"
                            >Analytics</a
                        >
                        <a
                            class="nav-item"
                            href="../ConsistencyRewrite/consistency.html"
                            >Consistency</a
                        >
                        <button
                            class="nav-item nav-item-parent is-active"
                            id="reports-toggle"
                            type="button"
                        >
                            My Reports
                            <span class="nav-caret">▾</span>
                        </button>
                        <div class="nav-sub" id="reports-subnav">
                            <a
                                class="nav-sub-item is-active"
                                href="../ReportsRewrite/reports.html?view=overview"
                                data-report-view="overview"
                            >
                                Analysis Overview
                            </a>
                            <a
                                class="nav-sub-item"
                                href="../ReportsRewrite/reports.html?view=smart"
                                data-report-view="smart"
                            >
                                Smart Analysis
                            </a>
                        </div>
                    </div>
                    <div class="nav-section">
                        <p class="nav-label">Account</p>
                        <a class="nav-item" href="../ProfileRewrite/profile.html"
                            >Profile</a
                        >
                        <a class="nav-item" href="../SupportRewrite/support.html"
                            >Support</a
                        >
                        <a
                            class="nav-item"
                            href="../UpdateLogRewrite/updatelog.html"
                            >Update Log</a
                        >
                    </div>
                </nav>
            </aside>

            <main class="main">
                <header class="topbar">
                    <div class="mobile-nav">
                        <button
                            class="btn btn-ghost mobile-nav-toggle"
                            type="button"
                            aria-expanded="false"
                        >
                            Menu
                            <i data-lucide="chevron-down"></i>
                        </button>
                        <div class="mobile-nav-menu" id="mobile-nav-menu"></div>
                    </div>
                    <div class="breadcrumbs">
                        <span class="crumb">Analytics</span>
                        <span class="crumb-sep">›</span>
                        <span class="crumb">My Reports</span>
                        <span class="crumb-sep">›</span>
                        <span class="crumb is-current" id="reports-crumb"
                            >Analysis Overview</span
                        >
                    </div>
                    <div class="topbar-actions">
                        <button class="btn btn-ghost" id="theme-toggle">
                            Dark mode
                        </button>
                        <div class="avatar">
                            <div class="avatar-dot"></div>
                        </div>
                    </div>
                </header>

                <section class="page reports-page">
                    <div id="reports-overview" class="reports-view">
                        <div class="page-header reports-header">
                            <div>
                            <h1 id="reports-title">Analysis Overview</h1>
                                <p class="subtle">
                                    A consolidated view of trading performance
                                    across key metrics.
                                </p>
                            </div>
                            <div class="reports-actions">
                                <div class="pill-group">
                                    <button
                                        class="pill is-active"
                                        type="button"
                                    >
                                        Weekly
                                    </button>
                                    <button class="pill" type="button">
                                        Monthly
                                    </button>
                                    <button class="pill" type="button">
                                        Quarterly
                                    </button>
                                </div>
                                <button class="btn btn-ghost btn-sm">
                                    Export
                                </button>
                            </div>
                        </div>

                        <div class="card overview-card">
                            <div class="overview-top">
                                <div>
                                    <p class="overview-label">Overview</p>
                                    <p class="overview-sub">
                                        All-time performance
                                    </p>
                                </div>
                                <div class="overview-metrics">
                                    <div class="overview-metric">
                                        <span class="metric-label"
                                            >Process Score</span
                                        >
                                        <span
                                            class="metric-value"
                                            id="overview-process"
                                            >—</span
                                        >
                                    </div>
                                    <div class="overview-metric">
                                        <span class="metric-label"
                                            >Emotional Balance</span
                                        >
                                        <span
                                            class="metric-value"
                                            id="overview-emotion"
                                            >—</span
                                        >
                                    </div>
                                    <div class="overview-metric">
                                        <span class="metric-label">SQN</span>
                                        <span
                                            class="metric-value"
                                            id="overview-sqn"
                                            >—</span
                                        >
                                    </div>
                                    <div class="overview-metric">
                                        <span class="metric-label"
                                            >Total P/L</span
                                        >
                                        <span
                                            class="metric-value"
                                            id="overview-total-pl"
                                            >—</span
                                        >
                                    </div>
                                </div>
                            </div>
                            <div class="overview-grid">
                                <div class="overview-panel">
                                    <p class="panel-title">Performance</p>
                                    <div class="panel-list">
                                        <div class="panel-row">
                                            <span>Net P/L</span>
                                            <strong id="metric-net-pl">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Gross Profit</span>
                                            <strong id="metric-gross-profit">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Gross Loss</span>
                                            <strong id="metric-gross-loss">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Win Rate</span>
                                            <strong id="metric-win-rate">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Profit Factor</span>
                                            <strong id="metric-profit-factor"
                                                >—</strong
                                            >
                                        </div>
                                        <div class="panel-row">
                                            <span>Expectancy</span>
                                            <strong id="metric-expectancy">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Average P/L</span>
                                            <strong id="metric-avg-pl">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Best Trade</span>
                                            <strong id="metric-best-trade">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Worst Trade</span>
                                            <strong id="metric-worst-trade"
                                                >—</strong
                                            >
                                        </div>
                                        <div class="panel-row">
                                            <span>Avg Win</span>
                                            <strong id="metric-avg-win">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Avg Loss</span>
                                            <strong id="metric-avg-loss">—</strong>
                                        </div>
                                    </div>
                                </div>
                                <div class="overview-panel">
                                    <p class="panel-title">Risk &amp; Quality</p>
                                    <div class="panel-list">
                                        <div class="panel-row">
                                            <span>Max Drawdown</span>
                                            <strong id="metric-drawdown">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Sharpe Ratio</span>
                                            <strong id="metric-sharpe">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Sortino Ratio</span>
                                            <strong id="metric-sortino">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Risk/Reward</span>
                                            <strong id="metric-rr">—</strong>
                                        </div>
                                    </div>
                                </div>
                                <div class="overview-panel">
                                    <p class="panel-title">Activity &amp; Consistency</p>
                                    <div class="panel-list">
                                        <div class="panel-row">
                                            <span>Total Trades</span>
                                            <strong id="metric-trades">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Wins / Losses</span>
                                            <strong id="metric-wl">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Trading Days</span>
                                            <strong id="metric-days">—</strong>
                                        </div>
                                        <div class="panel-row">
                                            <span>Trades/Day</span>
                                            <strong id="metric-trades-day"
                                                >—</strong
                                            >
                                        </div>
                                        <div class="panel-row">
                                            <span>Win Streak</span>
                                            <strong id="metric-win-streak"
                                                >—</strong
                                            >
                                        </div>
                                        <div class="panel-row">
                                            <span>Loss Streak</span>
                                            <strong id="metric-loss-streak"
                                                >—</strong
                                            >
                                        </div>
                                    </div>
                                </div>
                                <div class="overview-panel">
                                    <p class="panel-title">Smart Insights</p>
                                    <ul class="insight-list" id="overview-insights">
                                        <li>—</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="reports-smart" class="reports-view" hidden>
                        <div id="frame-1" class="card smart-intro">
                            <p class="frame-1-title">
                                Generate Optimized Trading Plan
                            </p>
                            <p class="subtle">
                                Analyze your recent trades and generate a
                                personalized plan based on your patterns.
                            </p>
                            <div class="smart-actions">
                                <button id="generate-button" class="btn btn-primary">
                                    Generate Plan
                                </button>
                                <span class="subtle">Based on logged trades.</span>
                            </div>
                        </div>

                        <div
                            id="analysis-loading-overlay"
                            class="analysis-loading-overlay"
                            style="display: none;"
                        >
                            <div class="analysis-loading-content">
                                <i class="analysis-loading-icon" data-lucide="loader"></i>
                                <p
                                    id="analysis-loading-text"
                                    class="analysis-loading-text"
                                >
                                    Analyzing your trades<span class="loading-dots"
                                        >.</span
                                    >
                                </p>
                            </div>
                        </div>

                        <div
                            id="analysis-empty"
                            class="analysis-empty"
                            style="display: none;"
                        >
                            <i data-lucide="brain" class="empty-icon"></i>
                            <p class="empty-title">Not enough data yet</p>
                            <p class="empty-description">
                                Log trades and link pre-executions to unlock
                                Smart Analysis.
                            </p>
                            <div class="empty-cta-container">
                                <a
                                    href="../PreTradeRewrite/pretrade.html"
                                    class="btn btn-primary btn-sm"
                                >
                                    Go to Pre Execution
                                </a>
                            </div>
                        </div>

                        <div
                            id="analysis-content"
                            class="analysis-content"
                            style="display: none;"
                        >
                            <div class="card analysis-hero-card">
                                <h2 class="hero-headline" id="hero-headline">
                                    Loading...
                                </h2>
                                <p class="hero-oneliner" id="hero-oneliner">
                                    Loading...
                                </p>
                                <div class="hero-callout" id="hero-callout">
                                    <div class="callout-label">
                                        #1 Issue to Fix This Week
                                    </div>
                                    <div class="callout-title" id="callout-title">
                                        Loading...
                                    </div>
                                    <div class="callout-cost" id="callout-cost"></div>
                                </div>
                            </div>

                            <div class="analysis-section">
                                <h3 class="section-title">Top Issues</h3>
                                <div
                                    id="top-issues-container"
                                    class="top-issues-container"
                                ></div>
                            </div>

                            <div class="analysis-section">
                                <h3 class="section-title">Rule-Breaking Patterns</h3>
                                <div class="card analysis-card">
                                    <div id="rule-breaking-content"></div>
                                </div>
                            </div>

                            <div class="analysis-section">
                                <h3 class="section-title">Emotional State Correlation</h3>
                                <div class="card analysis-card">
                                    <div id="emotions-content"></div>
                                </div>
                            </div>

                            <div class="analysis-section">
                                <h3 class="section-title">Setup Execution Quality</h3>
                                <div class="card analysis-card">
                                    <div id="setup-execution-content"></div>
                                </div>
                            </div>

                            <div class="analysis-section">
                                <h3 class="section-title">Consistency Trends</h3>
                                <div class="card analysis-card">
                                    <div id="trends-content"></div>
                                </div>
                            </div>

                            <div class="analysis-section">
                                <h3 class="section-title">Action Plan</h3>
                                <div class="card analysis-card">
                                    <div id="action-plan-content"></div>
                                </div>
                            </div>

                            <div
                                id="disclaimers-section"
                                class="disclaimers-section"
                                style="display: none;"
                            >
                                <div class="disclaimers-content">
                                    <i data-lucide="info" class="disclaimer-icon"></i>
                                    <div id="disclaimers-list"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <script>
            const toggleButton = document.getElementById("theme-toggle");
            const setTheme = (mode) => {
                document.body.classList.toggle("dark", mode === "dark");
                toggleButton.textContent =
                    mode === "dark" ? "Light mode" : "Dark mode";
                localStorage.setItem("dashboardTheme", mode);
            };

            const storedTheme = localStorage.getItem("dashboardTheme") || "light";
            setTheme(storedTheme);

            toggleButton.addEventListener("click", () => {
                const nextTheme = document.body.classList.contains("dark")
                    ? "light"
                    : "dark";
                setTheme(nextTheme);
            });
        </script>
        <script src="../Shared/notifications.js"></script>
        <script src="../Shared/reports-nav.js"></script>
        <script src="../Shared/client-data-lite.js"></script>
        <script src="../Shared/sidebar-icons.js"></script>
        <script src="../Shared/mobile-nav.js"></script>
        <script src="../old frontend/Analysis/analysis.js"></script>
        <script src="reports.js"></script>
        <script>
            lucide.createIcons();
        </script>
    </body>
</html>

